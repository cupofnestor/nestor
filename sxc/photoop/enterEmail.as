package com.nestor.sxc.photoop {		import flash.display.MovieClip;		import flash.events.KeyboardEvent;	import flash.text.TextField;	import flash.events.Event;	import flash.display.MovieClip;	import com.greensock.TweenLite;	import flash.events.DataEvent;	import flash.events.TextEvent;	import com.nestor.tools.AlertEvent;		public class enterEmail extends MovieClip {		public var logAdd:Boolean=false;		public var userAdd:String =null;				public function enterEmail() {			addEventListener(Event.ADDED_TO_STAGE,setup);			addEventListener(KeyboardEvent.KEY_UP,keypressed);			addEventListener("functionKey",funKeypressed);								}		function keypressed(e:KeyboardEvent):void		{			e.stopPropagation();			var key:String = String.fromCharCode(e.charCode);			trace("key pressed:"+e.charCode);			address.text +=key;		}		function funKeypressed(e:Event):void		{			var key:String = e.target.val;			e.stopPropagation();			trace("fun key pressed:"+key);			if(key=="del") address.text = address.text.substr(0,address.length-1);			if(key=="ent") submit();		}				function submit():void		{			userAdd =  address.text;			logAdd = this.check.toggleState;			if(isValidEmail(userAdd)){				var mailEvent:TextEvent=new TextEvent(TextEvent.TEXT_INPUT,false,false,userAdd);				dispatchEvent(mailEvent);				mailEvent = null;			}			else {				var alert:AlertEvent = new AlertEvent(AlertEvent.ALERT,true,false,"This is not a valid email address. An email address must be in the form: you@yourisp.com.  Please enter a valid email address to continue.");				trace("Email address not valid");				clearAdd();				dispatchEvent(alert);				alert=null;			}		}				public function clearAdd():void		{			address.text = "";		}				private function setup(e:Event):void{			rotation=-180;		}						public function offStage() {			TweenLite.to(this,3,{rotation:-180});		}				public function onStage() {			TweenLite.to(this,3,{rotation:0});		}				function isValidEmail(email:String):Boolean {			var emailExpression:RegExp = /^[a-z][\w.-]+@\w[\w.-]+\.[\w.-]*[a-z][a-z]$/i;			return emailExpression.test(email);		}									}	}