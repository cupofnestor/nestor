package{	import flash.display.*;	import flash.events.*;	import caurina.transitions.*; 	public class local extends graph	{		var hucTextLayer_mc:MovieClip;		var localBtn_mc:MovieClip;		var err:errorAlert;		var d1:dispatcher = new dispatcher("local");		public var zipCode:String;		public var reg_name:String;		public var zipMap:zipLoader;		public var loaderClip:MovieClip;		public function local():void		{						keyPad.addEventListener("tooMany", tooManyError);						//go_btn.addEventListener(MouseEvent.CLICK, loadZip);					}						public function loadMap(zip:String):void		{			var killLoader:Function = function killLoader(e:Event):void			{				var hucLabel:hucBlank = new hucBlank();			    addChild(hucLabel);				//trace("Loader Killed");				loaderClip.kill();				hucTextLayer_mc =  new hucTextLayer();				addChild(hucTextLayer_mc);				window_mc.addChild(zipMap);												var detail:String = "Your watershed is one of more than 2,000 in the United States. Every watershed has its own name and numerical address.  This helps to locate the watershed, like a zip code for water."+"\n"+ "\n"+									"Water flowing downstream from your watershed connects to larger rivers in regional watersheds.  Most of these rivers flow out to the sea."+"\n"+ "\n"+									"Ready to learn about your regional watershed?"+"\n"+ "\n";													hucTextLayer_mc.detail.field.text = detail;				hucTextLayer_mc.hucField.text =  zipMap.huc_name;				hucLabel.field.text = "#"+zipMap.huc;				reg_name = zipMap.reg_name;								d1.loaded();							}						var reset:Function = function reset(e:Event):void			{				trace("ServerError");				loaderClip.kill();				keyPad.visible = true;				keyPad.zip_field.text = "";				err=new errorAlert();				addChild(err);				err.x = 664;				err.y = 384;				err.field.text = e.target.errMsg;											}						this.dispatchEvent(new Event("query"));			loaderClip = new loaderAnim();			zipCode = zip;						this.addChildAt(loaderClip,0);									loaderClip.x = 0;			loaderClip.y = 0;			keyPad.visible=false;			//this.keyPad.kill();						//var mask_mc:MovieClip = new glassMask();			//stage.addChildAt(mask_mc,1);						zipMap = new zipLoader();						zipMap.addEventListener("reset", reset);			zipMap.zipLoad(zipCode);			zipMap.dLoaded.addEventListener(dispatcher.LOADED,killLoader);						//trace("mapLoaded");		}		public function btnActivate():void		{				//trace('btnactivate');				localBtn_mc = new localBtn();				addChild(localBtn_mc);				localBtn_mc.x=1150;				localBtn_mc.y= 670;				localBtn_mc.active_area.addEventListener(MouseEvent.MOUSE_UP, localOutTransition);		}		private function localOutTransition(e:MouseEvent):void		{			//trace("loader.regTransition");			d1.finished();		}				private function tooManyError(e:Event):void		{			err=new errorAlert();			addChild(err);			err.x = 664;			err.y = 384;			err.field.text = "A Zip Code must contain exactly 5 digits.";		}								}}