package com.nestor.hcl.slideshow {	import com.nestor.tools.phpQuery;	import flash.events.*;	import flash.html.*;	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.display.Sprite;		public class show extends Sprite{		public var showName:String;		private var id:Number;		private var www:String ;		private var query:String;		private var getByID:String;		private var media:String;		private var url:String;		private var slideShow:Array=[];		private var stageW,stageH:Number;				public function show(_cfg:XML,_i:Number) {			id=_i;			setup(_cfg)			addEventListener(Event.ADDED_TO_STAGE, init);		}				private function init(e:Event):void{			removeEventListener(Event.ADDED_TO_STAGE, init);			stageW=stage.stageWidth;			stageH=stage.stageHeight;			addEventListener("loadingHtml", loading);			addEventListener("readyToPlay", ready);		}		private function setup(_cfg:XML):void		{			www=_cfg.net.www;			query=_cfg.net.query;			getByID=_cfg.net.getByID;			url=www+query+getByID+id.toString();			trace("Full url: "+url);			var q:phpQuery = new phpQuery(url);			q.addEventListener(Event.COMPLETE, showLoaded);					}				private function showLoaded(e:Event):void		{			trace("Loaded");			var xData:XML = e.target.vars as XML;			showName = xData.name;			var aSlides:Array = [];			for each (var _X:XML in xData.slide)			{				aSlides.push(_X.toString());				trace("Pushed Array"+_X.@id);			}						buildShow(aSlides);		}				private function buildShow(a:Array):void		{			var isFirst:Boolean = true;						for each (var s:String in a){				slideShow.push(buildSlide(s, isFirst));				isFirst = false;							}			addChild(slideShow[0]);					}				private function buildSlide(s:String, f:Boolean):*		{			/*var loadedHTML = function (e:Event):*			{				e.target.removeEventListener(Event.COMPLETE, loadedHTML);				trace("HTML LOADED, CHEIF"+f);				(f == true)? dispatchEvent(new Event("readyToPlay")) : trace("Not First");				bmd.draw(hload);				bm.bitmapData=bmd;				return bm;							}						var hload:HTMLLoader = new HTMLLoader();			hload.width = stageW;			hload.height = stageH;			hload.addEventListener(Event.COMPLETE, loadedHTML);			hload.loadString(s);			*/			var tmpSlide = new slide(s,stageW,stageH);			//var bm:Bitmap = new Bitmap();			//var bmd:BitmapData = new BitmapData(hload.width, hload.height);			return tmpSlide;					}				function loading(e:Event):void		{			trace("Loading, Please Wait");		}				function ready(e:Event):void		{			trace("Ready to play");		}	}	}/*<www>http://www.kittynchoke.com/monadnock/fslides/</www><query>show_query.php</query><getbyID>?id=</getbyID><getbyTopic>?topic=</getbyTopic><media>media/</media>*/